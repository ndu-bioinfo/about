<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Experience</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js?v=1.0.1"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }
        #resumeContent {
            width: 100%;
            overflow: visible; /* Ensure no scrolling */
        }
    </style>
</head>

<body>

    <!-- Button to trigger the download -->
    <button onclick="downloadPDF()">Download PDF</button>

    <!-- Embed the content of resume.html here -->
    <div id="resumeContent">
        <!-- Content will be loaded here by JavaScript -->
    </div>

    <script>
        // Function to fetch and load the content of resume.html
        window.onload = function() {
            fetch('resume/resume.html')
                .then(response => response.text())
                .then(data => {
                    // Load the content and resize the container to fit content
                    var resumeContainer = document.getElementById('resumeContent');
                    resumeContainer.innerHTML = data;

                    // Dynamically adjust the height to fit content
                    document.body.style.height = resumeContainer.scrollHeight + 'px';
                })
                .catch(error => console.error('Error loading resume.html:', error));
        };

        // Function to download the content as PDF
        function downloadPDF() {
            // Default file name with current date and time
            var now = new Date();
            var dateTime = now.getFullYear() + '-' + 
                           (now.getMonth() + 1).toString().padStart(2, '0');
            var fileName = 'niudu_resume_' + dateTime;

            // Get the content of the resume
            var element = document.getElementById('resumeContent');

            // Convert HTML to PDF and trigger download
            html2pdf()
                .from(element)
                .set({
                    margin: 1,
                    filename: fileName + '.pdf',
                    html2canvas: { scale: 2 },
                    jsPDF: { orientation: 'portrait', unit: 'in', format: 'letter' }
                })
                .save();
        }
    </script>

</body>
</html>