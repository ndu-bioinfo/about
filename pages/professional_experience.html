<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Experience</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- marked.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js?v=1.0.1"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }
        #resumeContent {
            width: 100%;
            overflow: visible;
        }
    </style>
</head>

<body>

    <!-- Button to trigger the download -->
    <button onclick="downloadPDF()">Download PDF</button>

    <!-- Embed the content of resume.md here -->
    <div id="resumeContent">
        <!-- Markdown content will be loaded here by JavaScript -->
    </div>

    <script>
        // Function to fetch and load the content of resume.md, then convert to HTML
        window.onload = function() {
            fetch('resume/resume.md')
                .then(response => response.text())
                .then(data => {
                    // Use marked.js to convert Markdown to HTML
                    var htmlContent = marked(data);

                    // Inject the generated HTML into resumeContent div
                    document.getElementById('resumeContent').innerHTML = htmlContent;

                    // Adjust the height dynamically
                    document.body.style.height = document.getElementById('resumeContent').scrollHeight + 'px';
                })
                .catch(error => console.error('Error loading resume.md:', error));
        };

        // Function to download the content as PDF
        function downloadPDF() {
            var now = new Date();
            var dateTime = now.getFullYear() + '-' + 
                           (now.getMonth() + 1).toString().padStart(2, '0');
            var fileName = 'niudu_resume_' + dateTime;

            var element = document.getElementById('resumeContent');

            html2pdf()
                .from(element)
                .set({
                    margin: 1,
                    filename: fileName + '.pdf',
                    html2canvas: { scale: 2 },
                    jsPDF: { orientation: 'portrait', unit: 'in', format: 'letter' }
                })
                .save();
        }
    </script>

</body>
</html>